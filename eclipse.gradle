
apply plugin: 'eclipse'

eclipse.project {
    buildCommand 'org.eclipse.jdt.core.javabuilder'
    buildCommand 'org.eclipse.wst.common.project.facet.core.builder'
    buildCommand 'org.eclipse.wst.validation.validationbuilder'
    buildCommand 'org.eclipse.buildship.core.gradleprojectbuilder'
    buildCommand 'org.thymeleaf.extras.eclipse.core.ThymeleafBuilder'
    buildCommand 'org.springframework.ide.eclipse.boot.validation.springbootbuilder'
    
    natures 'org.eclipse.jdt.core.javanature'
    natures 'org.eclipse.wst.common.project.facet.core.nature'
    natures 'org.eclipse.wst.common.modulecore.ModuleCoreNature'
    natures 'org.eclipse.jem.workbench.JavaEMFNature'
    natures 'org.eclipse.buildship.core.gradleprojectnature'
    natures 'org.eclipse.wst.jsdt.core.jsNature'
    natures 'org.thymeleaf.extras.eclipse.core.ThymeleafNature'
}

tasks.eclipse.doFirst {
    File prefs = file(".settings/org.eclipse.buildship.core.prefs")
    if(!prefs.exists()){
        prefs.append('''
            connection.project.dir=
            eclipse.preferences.version=1
            '''.stripIndent())
    }
}